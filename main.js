(()=>{"use strict";var t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},e=/^[A-Za-zА-Яа-яёЁ\- ]+$/,o=function(e,o,r){var n=e.querySelector(".".concat(o.name,"-input-error"));o.classList.add(t.inputErrorClass),n.textContent=r,n.classList.add(t.errorClass)},r=function(e,o){var r=e.querySelector(".".concat(o.name,"-input-error"));o.classList.remove(t.inputErrorClass),r.classList.remove(t.errorClass),r.textContent=""},n=function(o,r){!function(t){return t.some((function(t){return"url"===t.type?!t.validity.valid:!e.test(t.value)||!t.validity.valid}))}(o)?(r.disabled=!1,r.classList.remove(t.inactiveButtonClass)):(r.disabled=!0,r.classList.add(t.inactiveButtonClass))},i=function(){Array.from(document.querySelectorAll(t.formSelector)).forEach((function(e){e.addEventListener("submit",(function(t){t.preventDefault()})),function(e){var i=Array.from(e.querySelectorAll(t.inputSelector)),a=e.querySelector(t.submitButtonSelector);i.forEach((function(t){t.addEventListener("input",(function(){!function(t,e){e.validity.patternMismatch?o(t,e,e.dataset.error):e.validity.valid?r(t,e):o(t,e,e.validationMessage)}(e,t),n(i,a)}))}))}(e)}))},a=function(t,e){var o=Array.from(t.querySelectorAll(e.inputSelector)),i=t.querySelector(e.submitButtonSelector);o.forEach((function(e){r(t,e)})),n(o,i)};i();var c=function(t){t.classList.add("popup_is-opened"),document.addEventListener("click",s),document.addEventListener("keydown",l)},u=function(e){e.classList.remove("popup_is-opened"),document.removeEventListener("click",s),document.removeEventListener("keydown",l),a(e,t),e.querySelector(".popup__form").reset()};function l(t){if("Escape"===t.key){var e=document.querySelector(".popup_is-opened");e&&u(e)}}function s(t){t.target.classList.contains("popup")&&u(t.target)}var p=document.querySelector("#card-template").content,f=document.querySelector(".popup_type_image"),d=document.querySelector(".popup__image"),m=document.querySelector(".popup__caption");function _(t){t.currentTarget.classList.toggle("card__like-button_is-active")}function v(t){d.src=t.target.src,m.textContent=t.target.alt,c(f)}function y(t){t.target.closest(".places__item").remove()}var x=function(t,e,o,r,n){var i=p.cloneNode(!0),a=i.querySelector(".card__title"),c=i.querySelector(".card__image");return c.src=t,c.alt=e,a.textContent=e,i.querySelector(".card__delete-button").addEventListener("click",o),i.querySelector(".card__like-button").addEventListener("click",r),i.querySelector(".card__image").addEventListener("click",n),i},b=document.querySelector(".profile__title"),S=document.querySelector(".profile__description"),q=document.querySelector(".profile__image");fetch("https://nomoreparties.co/v1/wff-cohort-39/users/me",{headers:{authorization:"ca811722-b39a-47f2-8683-a15951454f2a"}}).then((function(t){if(!t.ok)throw new Error("Ошибка: ".concat(t.status));return t.json()})).then((function(t){b.textContent=t.name,S.textContent=t.about,q.style.backgroundImage="url('".concat(t.avatar,"')"),t._id})).catch((function(t){console.error("Ошибка при загрузке данных пользователя:",t)}));var h=document.querySelector(".page"),w=document.querySelector(".places__list"),g=document.querySelector(".popup_type_edit"),D=document.querySelector(".popup_type_new-card"),L=document.querySelector(".popup__input_type_name"),E=document.querySelector(".popup__input_type_description"),k=document.querySelector(".profile__title"),M=document.querySelector(".profile__description");[{name:"Арктика",link:"https://images.unsplash.com/photo-1589656966895-2f33e7653819?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Мексика",link:"https://images.unsplash.com/photo-1521216774850-01bc1c5fe0da?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Европа",link:"https://images.unsplash.com/photo-1516483638261-f4dbaf036963?q=80&w=1972&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Азия",link:"https://images.unsplash.com/photo-1493780474015-ba834fd0ce2f?q=80&w=2042&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Африка",link:"https://images.unsplash.com/photo-1507461476191-0ed4f9f18533?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Антарктика",link:"https://images.unsplash.com/photo-1551415923-a2297c7fda79?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}].forEach((function(t){w.append(x(t.link,t.name,y,_,v))})),h.addEventListener("click",(function(e){e.target.classList.contains("profile__edit-button")?(L.value=k.textContent,E.value=M.textContent,c(g)):e.target.classList.contains("profile__add-button")?c(D):e.target.classList.contains("popup__close")&&(u(e.target.closest(".popup")),a(e.target.closest(".popup"),t))}));var A=document.forms["edit-profile"],C=document.forms["new-place"];C.addEventListener("submit",(function(t){t.preventDefault();var e=document.querySelector(".popup__input_type_card-name").value,o=document.querySelector(".popup__input_type_url").value;w.prepend(x(o,e,y,_,v)),C.reset(),u(D)})),C.addEventListener("input",(function(){return i()})),A.addEventListener("submit",(function(t){t.preventDefault(),k.textContent=L.value,M.textContent=E.value,u(g)})),A.addEventListener("input",(function(){return i()}))})();