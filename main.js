(()=>{"use strict";var e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},t=/^[A-Za-zА-Яа-яёЁ\- ]+$/,o=function(t,o,r){var n=t.querySelector(".".concat(o.name,"-input-error"));o.classList.add(e.inputErrorClass),n.textContent=r,n.classList.add(e.errorClass)},r=function(t,o){var r=t.querySelector(".".concat(o.name,"-input-error"));o.classList.remove(e.inputErrorClass),r.classList.remove(e.errorClass),r.textContent=""},n=function(o,r){!function(e){return e.some((function(e){return"url"===e.type?!e.validity.valid:!t.test(e.value)||!e.validity.valid}))}(o)?(r.disabled=!1,r.classList.remove(e.inactiveButtonClass)):(r.disabled=!0,r.classList.add(e.inactiveButtonClass))},i=function(){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),function(t){var i=Array.from(t.querySelectorAll(e.inputSelector)),a=t.querySelector(e.submitButtonSelector);i.forEach((function(e){e.addEventListener("input",(function(){!function(e,t){t.validity.patternMismatch?o(e,t,t.dataset.error):t.validity.valid?r(e,t):o(e,t,t.validationMessage)}(t,e),n(i,a)}))}))}(t)}))},a=function(e,t){var o=Array.from(e.querySelectorAll(t.inputSelector)),i=e.querySelector(t.submitButtonSelector);o.forEach((function(t){r(e,t)})),n(o,i)};i();var c=function(e){e.classList.add("popup_is-opened"),document.addEventListener("click",p),document.addEventListener("keydown",l)},u=function(t){t.classList.remove("popup_is-opened"),document.removeEventListener("click",p),document.removeEventListener("keydown",l),a(t,e),t.querySelector(".popup__form").reset()};function l(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&u(t)}}function p(e){e.target.classList.contains("popup")&&u(e.target)}var s=document.querySelector("#card-template").content,d=document.querySelector(".popup_type_image"),f=document.querySelector(".popup__image"),m=document.querySelector(".popup__caption");function _(e){e.currentTarget.classList.toggle("card__like-button_is-active")}function v(e){f.src=e.target.src,m.textContent=e.target.alt,c(d)}function y(e){e.target.closest(".places__item").remove()}var x=function(e,t,o,r,n){var i=s.cloneNode(!0),a=i.querySelector(".card__title"),c=i.querySelector(".card__image");return c.src=e,c.alt=t,a.textContent=t,i.querySelector(".card__delete-button").addEventListener("click",o),i.querySelector(".card__like-button").addEventListener("click",r),i.querySelector(".card__image").addEventListener("click",n),i},b=document.querySelector(".page"),S=document.querySelector(".places__list"),q=document.querySelector(".popup_type_edit"),w=document.querySelector(".popup_type_new-card"),D=document.querySelector(".popup__input_type_name"),g=document.querySelector(".popup__input_type_description"),L=document.querySelector(".profile__title"),h=document.querySelector(".profile__description");[{name:"Арктика",link:"https://images.unsplash.com/photo-1589656966895-2f33e7653819?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Мексика",link:"https://images.unsplash.com/photo-1521216774850-01bc1c5fe0da?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Европа",link:"https://images.unsplash.com/photo-1516483638261-f4dbaf036963?q=80&w=1972&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Азия",link:"https://images.unsplash.com/photo-1493780474015-ba834fd0ce2f?q=80&w=2042&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Африка",link:"https://images.unsplash.com/photo-1507461476191-0ed4f9f18533?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Антарктика",link:"https://images.unsplash.com/photo-1551415923-a2297c7fda79?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}].forEach((function(e){S.append(x(e.link,e.name,y,_,v))})),b.addEventListener("click",(function(t){t.target.classList.contains("profile__edit-button")?(D.value=L.textContent,g.value=h.textContent,c(q)):t.target.classList.contains("profile__add-button")?c(w):t.target.classList.contains("popup__close")&&(u(t.target.closest(".popup")),a(t.target.closest(".popup"),e))}));var E=document.forms["edit-profile"],M=document.forms["new-place"];M.addEventListener("submit",(function(e){e.preventDefault();var t=document.querySelector(".popup__input_type_card-name").value,o=document.querySelector(".popup__input_type_url").value;S.prepend(x(o,t,y,_,v)),M.reset(),u(w)}),i),E.addEventListener("submit",(function(e){e.preventDefault(),L.textContent=D.value,h.textContent=g.value,u(q)}),i)})();