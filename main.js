(()=>{"use strict";var e=function(e){e.classList.add("popup_is-opened"),document.addEventListener("click",n),document.addEventListener("keydown",o)},t=function(e){e.classList.remove("popup_is-opened"),document.removeEventListener("click",n),document.removeEventListener("keydown",o)};function o(e){if("Escape"===e.key){var o=document.querySelector(".popup_is-opened");o&&t(o)}}function n(e){e.target.classList.contains("popup")&&t(e.target)}var r=document.querySelector("#card-template").content,i=document.querySelector(".popup_type_image"),a=document.querySelector(".popup__image"),c=document.querySelector(".popup__caption");function u(e){e.currentTarget.classList.toggle("card__like-button_is-active")}function p(t){a.src=t.target.src,c.textContent=t.target.alt,e(i)}function l(e){e.target.closest(".places__item").remove()}var s=function(e,t,o,n,i){var a=r.cloneNode(!0),c=a.querySelector(".card__title"),u=a.querySelector(".card__image");return u.src=e,u.alt=t,c.textContent=t,a.querySelector(".card__delete-button").addEventListener("click",o),a.querySelector(".card__like-button").addEventListener("click",n),a.querySelector(".card__image").addEventListener("click",i),a},d="popup__button_disabled",f="popup__input_type_error",m="popup__error_visible",_=/^[A-Za-zА-Яа-яёЁ\- ]+$/,v=function(e,t,o){var n=e.querySelector(".".concat(t.name,"-input-error"));t.classList.add(f),n.textContent=o,n.classList.add(m)},y=function(e){var t=Array.from(e.querySelectorAll(".popup__input")),o=e.querySelector(".popup__button");t.forEach((function(n){n.addEventListener("input",(function(){!function(e,t){t.validity.patternMismatch?v(e,t,t.dataset.error):t.validity.valid?function(e,t){var o=e.querySelector(".".concat(t.name,"-input-error"));t.classList.remove(f),o.classList.remove(m),o.textContent=""}(e,t):v(e,t,t.validationMessage)}(e,n),function(e,t){!function(e){return e.some((function(e){return"url"===e.type?!e.validity.valid:!_.test(e.value)||!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(d)):(t.disabled=!0,t.classList.add(d))}(t,o)}))}))},x=function(){Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),y(e)}))};x();var b=document.querySelector(".page"),q=document.querySelector(".places__list"),w=document.querySelector(".popup_type_edit"),D=document.querySelector(".popup_type_new-card"),L=document.querySelector(".popup__input_type_name"),S=document.querySelector(".popup__input_type_description"),g=document.querySelector(".profile__title"),h=document.querySelector(".profile__description");[{name:"Арктика",link:"https://images.unsplash.com/photo-1589656966895-2f33e7653819?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Мексика",link:"https://images.unsplash.com/photo-1521216774850-01bc1c5fe0da?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Европа",link:"https://images.unsplash.com/photo-1516483638261-f4dbaf036963?q=80&w=1972&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Азия",link:"https://images.unsplash.com/photo-1493780474015-ba834fd0ce2f?q=80&w=2042&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Африка",link:"https://images.unsplash.com/photo-1507461476191-0ed4f9f18533?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Антарктика",link:"https://images.unsplash.com/photo-1551415923-a2297c7fda79?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}].forEach((function(e){q.append(s(e.link,e.name,l,u,p))})),b.addEventListener("click",(function(o){o.target.classList.contains("profile__edit-button")?(L.value=g.textContent,S.value=h.textContent,e(w)):o.target.classList.contains("profile__add-button")?e(D):o.target.classList.contains("popup__close")&&t(o.target.closest(".popup"))}));var M=document.forms["edit-profile"],k=document.forms["new-place"];k.addEventListener("submit",(function(e){e.preventDefault();var o=document.querySelector(".popup__input_type_card-name").value,n=document.querySelector(".popup__input_type_url").value;q.prepend(s(n,o,l,u,p)),k.reset(),t(D)}),x),M.addEventListener("submit",(function(e){e.preventDefault(),g.textContent=L.value,h.textContent=S.value,t(w)}),x)})();